<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Creating a macOS Statusbar Application | Gokhun</title>
<meta name=keywords content="macos,swift,swift-ui">
<meta name=description content="In this post we will create a macOS statusbar application. In order to follow this tutorial you will need following items:
 A device that is capable of running macOS Big Sur Xcode (I am using Version 13.2.1 (13C100))  Create Project   Open Xcode and create new project.
  Select App under macOS platform   Enter your product name (Statusbar)
  Select Team if you have one or let Xcode generate one (My developer account)">
<meta name=author content="ghokun">
<link rel=canonical href=https://gokhun.dev/posts/macos-statusbar-application/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://github.com/ghokun/blog/raw/main/static/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://github.com/ghokun/blog/raw/main/static/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://github.com/ghokun/blog/raw/main/static/favicon-32x32.png>
<link rel=apple-touch-icon href=https://github.com/ghokun/blog/raw/main/static/apple-touch-icon.png>
<link rel=mask-icon href=https://github.com/ghokun/blog/raw/main/static/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.2">
<meta property="og:title" content="Creating a macOS Statusbar Application">
<meta property="og:description" content="In this post we will create a macOS statusbar application. In order to follow this tutorial you will need following items:
 A device that is capable of running macOS Big Sur Xcode (I am using Version 13.2.1 (13C100))  Create Project   Open Xcode and create new project.
  Select App under macOS platform   Enter your product name (Statusbar)
  Select Team if you have one or let Xcode generate one (My developer account)">
<meta property="og:type" content="article">
<meta property="og:url" content="https://gokhun.dev/posts/macos-statusbar-application/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-12-27T19:06:44+00:00">
<meta property="article:modified_time" content="2021-12-27T19:06:44+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Creating a macOS Statusbar Application">
<meta name=twitter:description content="In this post we will create a macOS statusbar application. In order to follow this tutorial you will need following items:
 A device that is capable of running macOS Big Sur Xcode (I am using Version 13.2.1 (13C100))  Create Project   Open Xcode and create new project.
  Select App under macOS platform   Enter your product name (Statusbar)
  Select Team if you have one or let Xcode generate one (My developer account)">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://gokhun.dev/posts/"},{"@type":"ListItem","position":3,"name":"Creating a macOS Statusbar Application","item":"https://gokhun.dev/posts/macos-statusbar-application/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Creating a macOS Statusbar Application","name":"Creating a macOS Statusbar Application","description":"In this post we will create a macOS statusbar application. In order to follow this tutorial you will need following items:\n A device that is capable of running macOS Big Sur Xcode (I am using Version 13.2.1 (13C100))  Create Project   Open Xcode and create new project.\n  Select App under macOS platform   Enter your product name (Statusbar)\n  Select Team if you have one or let Xcode generate one (My developer account)","keywords":["macos","swift","swift-ui"],"articleBody":"In this post we will create a macOS statusbar application. In order to follow this tutorial you will need following items:\n A device that is capable of running macOS Big Sur Xcode (I am using Version 13.2.1 (13C100))  Create Project   Open Xcode and create new project.\n  Select App under macOS platform   Enter your product name (Statusbar)\n  Select Team if you have one or let Xcode generate one (My developer account)\n  Enter an organization identifier (Reverse domain - dev.gokhun)\n  Select SwiftUI as interface and Swift as language\n  Uncheck core data and tests for now\n  Add Statusbar In order to add statusbar and menu items we need to add NSApplicationDelegate to our application.\nRight click to Statusbar folder in project navigator and create a new swift file:\n// AppDelegate.swift import AppKit class AppDelegate: NSObject, NSApplicationDelegate { // Leave here empty for now } Open StatusbarApp.swift file and fill with followings:\n// StatusbarApp.swift import SwiftUI @main struct StatusbarApp: App { @NSApplicationDelegateAdaptor(AppDelegate.self) var appDelegate var body: some Scene { Settings { // Dont forget to change this line to Settings ContentView() } } } NSApplicationDelegateAdaptorwill let us use AppKit in our SwiftUI based application. Since our application will be in statusbar we will not use WindowGroup. Instead we will use Settings which will give us a preferences menu bar item.\nReturn to AppDelegate.swift file and override applicationDidFinishLaunching method to add statusbar item:\n// AppDelegate.swift import AppKit class AppDelegate: NSObject, NSApplicationDelegate { // We need to declare NSStatusItem here, otherwise it gets destroyed after // applicationDidFinishLaunching is called var statusBarItem : NSStatusItem! var statusBarMenu : NSMenu! func applicationDidFinishLaunching(_ notification: Notification) { // Returns the system-wide status bar located in the menu bar. let statusBar = NSStatusBar.system // Returns a newly created status item that has been allotted a specified space within the status bar. self.statusBarItem = statusBar.statusItem(withLength: NSStatusItem.squareLength) self.statusBarItem.button?.image = NSImage(systemSymbolName: \"star.fill\", accessibilityDescription: \"Status bar icon\") // An object that manages an app’s menus. self.statusBarMenu = NSMenu() self.statusBarMenu.addItem(withTitle: \"Hello\", action: nil, keyEquivalent: \"\") // Add menu to statusbar self.statusBarItem.menu = self.statusBarMenu } } Finally we need to add a property to our target. Open Xcode and select the top item in Project navigator. Then select TARGETS menu and navigate to Info tab.\nAdd Application is agent (UIElement) YES as seen in screen shot above. This makes our application run in background and do not populate the menu bar (File, edit, view … items near apple logo).\nAt this stage we should have a star with a single menu item in our statusbar.\nOpen Windows In order to make our statusbar application more useful let’s open some windows from statusbar items programmatically. We will create NSWindow instances by clicking statusbar menu items. In these windows we will use SwiftUI elements.\nFirst create a SwiftUI view with following content:\n// HelloView import SwiftUI struct HelloView: View { var body: some View { Text(\"Hello from statusbar\") .frame(width: 200, height: 100, alignment: .center) } } Add following function to AppDelegate.swift file:\n@objc func sayHello() { // Get focus from other apps NSApplication.shared.activate(ignoringOtherApps: true) // Create the frame to draw window let hello = NSWindow( contentRect: NSRect(x: 0, y: 0, width: 640, height: 480), styleMask: [.titled, .closable, .fullSizeContentView], backing: .buffered, defer: false ) // Add title hello.title = \"Hello!\" // Keeps window reference active, we need to use this when using NSHostingView hello.isReleasedWhenClosed = false // Lets us use SwiftUI viws with AppKit hello.contentView = NSHostingView(rootView: HelloView()) // Center and bring forward hello.center() hello.makeKeyAndOrderFront(nil) } To call this function we will add a selector to our statusbar item:\n// Find the line where you add Hello item self.statusBarMenu.addItem(withTitle: \"Hello\", action: #selector(sayHello), keyEquivalent: \"\") Finally our AppDelegate.swift file looks like this:\n// AppDelegate.swift import AppKit import SwiftUI class AppDelegate: NSObject, NSApplicationDelegate { var statusBarItem: NSStatusItem! var statusBarMenu: NSMenu! func applicationDidFinishLaunching(_ notification: Notification) { // Returns the system-wide status bar located in the menu bar. let statusBar = NSStatusBar.system // Returns a newly created status item that has been allotted a specified space within the status bar. self.statusBarItem = statusBar.statusItem(withLength: NSStatusItem.squareLength) // systemSymbolName is taken from SF Symbols app that is available for macOS // https://developer.apple.com/sf-symbols/ self.statusBarItem.button?.image = NSImage(systemSymbolName: \"star.fill\", accessibilityDescription: \"Status bar icon\") // An object that manages an app’s menus. self.statusBarMenu = NSMenu() self.statusBarMenu.addItem(withTitle: \"Hello\", action: #selector(sayHello), keyEquivalent: \"\") // Add menu to statusbar self.statusBarItem.menu = self.statusBarMenu } @objc func sayHello() { // Get focus from other apps NSApplication.shared.activate(ignoringOtherApps: true) // Create the frame to draw window let hello = NSWindow( contentRect: NSRect(x: 0, y: 0, width: 640, height: 480), styleMask: [.titled, .closable, .fullSizeContentView], backing: .buffered, defer: false ) // Add title hello.title = \"Hello!\" // Keeps window reference active, we need to use this when using NSHostingView hello.isReleasedWhenClosed = false // NSHostingView lets us use SwiftUI views with AppKit hello.contentView = NSHostingView(rootView: HelloView()) // Center and bring forward hello.center() hello.makeKeyAndOrderFront(nil) } } Here is the final result: Summary To summarize:\n We have used an adapter to add AppKit to our SwiftUI application. We have used another adapter to call SwiftUI view from AppKit NSWindow. We have set application target property to run it in background  Source code for this application can be found in GitHub\n","wordCount":"856","inLanguage":"en","datePublished":"2021-12-27T19:06:44Z","dateModified":"2021-12-27T19:06:44Z","author":{"@type":"Person","name":"ghokun"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://gokhun.dev/posts/macos-statusbar-application/"},"publisher":{"@type":"Organization","name":"Gokhun","logo":{"@type":"ImageObject","url":"https://github.com/ghokun/blog/raw/main/static/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://gokhun.dev accesskey=h title="Gokhun (Alt + H)">
<img src=/apple-touch-icon.png alt=logo aria-label=logo height=35>Gokhun</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu onscroll=menu_on_scroll()>
<li>
<a href=https://gokhun.dev/posts/ title=posts>
<span>posts</span>
</a>
</li>
<li>
<a href=https://gokhun.dev/tags/ title=tags>
<span>tags</span>
</a>
</li>
<li>
<a href=https://gokhun.dev/search/ title="search (Alt + /)" accesskey=/>
<span>search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://gokhun.dev>Home</a>&nbsp;»&nbsp;<a href=https://gokhun.dev/posts/>Posts</a></div>
<h1 class=post-title>
Creating a macOS Statusbar Application
</h1>
<div class=post-meta>December 27, 2021&nbsp;·&nbsp;5 min&nbsp;·&nbsp;ghokun&nbsp;|&nbsp;<a href=https://github.com/ghokun/blog/content/posts/macos-statusbar-application.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header>
<div class=post-content><p>In this post we will create a macOS statusbar application.
In order to follow this tutorial you will need following items:</p>
<ul>
<li>A device that is capable of running macOS Big Sur</li>
<li>Xcode (I am using Version 13.2.1 (13C100))</li>
</ul>
<h3 id=create-project>Create Project<a hidden class=anchor aria-hidden=true href=#create-project>#</a></h3>
<ul>
<li>
<p>Open Xcode and create new project.</p>
</li>
<li>
<p>Select App under macOS platform
<img loading=lazy src=/img/statusbar_01.png alt=statusbar_1>
</p>
</li>
<li>
<p>Enter your product name (Statusbar)</p>
</li>
<li>
<p>Select Team if you have one or let Xcode generate one (My developer account)</p>
</li>
<li>
<p>Enter an organization identifier (Reverse domain - dev.gokhun)</p>
</li>
<li>
<p>Select SwiftUI as interface and Swift as language</p>
</li>
<li>
<p>Uncheck core data and tests for now</p>
</li>
</ul>
<p><img loading=lazy src=/img/statusbar_02.png alt=statusbar_1>
</p>
<h3 id=add-statusbar>Add Statusbar<a hidden class=anchor aria-hidden=true href=#add-statusbar>#</a></h3>
<p>In order to add statusbar and menu items we need to add <code>NSApplicationDelegate</code>
to our application.</p>
<p>Right click to <code>Statusbar</code> folder in project navigator and create a new swift
file:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>// AppDelegate.swift</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>AppKit</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppDelegate</span>: NSObject, NSApplicationDelegate {
    <span style=color:#75715e>// Leave here empty for now</span>
}
</code></pre></div><p>Open <code>StatusbarApp.swift</code> file and fill with followings:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>//  StatusbarApp.swift</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>SwiftUI</span>

@main
<span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>StatusbarApp</span>: App {

    @NSApplicationDelegateAdaptor(AppDelegate.<span style=color:#66d9ef>self</span>) <span style=color:#66d9ef>var</span> appDelegate

    <span style=color:#66d9ef>var</span> body: some Scene {
        Settings { <span style=color:#75715e>// Dont forget to change this line to Settings</span>
            ContentView()
        }
    }
}
</code></pre></div><p><code>NSApplicationDelegateAdaptor</code>will let us use <code>AppKit</code> in our SwiftUI based application.
Since our application will be in statusbar we will not use <code>WindowGroup</code>. Instead we will use
<code>Settings</code> which will give us a preferences menu bar item.</p>
<p>Return to <code>AppDelegate.swift</code> file and override <code>applicationDidFinishLaunching</code> method to add statusbar item:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>// AppDelegate.swift</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>AppKit</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppDelegate</span>: NSObject, NSApplicationDelegate {

    <span style=color:#75715e>// We need to declare NSStatusItem here, otherwise it gets destroyed after</span>
    <span style=color:#75715e>// applicationDidFinishLaunching is called</span>
    <span style=color:#66d9ef>var</span> statusBarItem : NSStatusItem!
    <span style=color:#66d9ef>var</span> statusBarMenu : NSMenu!

    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>applicationDidFinishLaunching</span>(<span style=color:#66d9ef>_</span> notification: Notification) {

        <span style=color:#75715e>// Returns the system-wide status bar located in the menu bar.</span>
        <span style=color:#66d9ef>let</span> statusBar = NSStatusBar.system

        <span style=color:#75715e>// Returns a newly created status item that has been allotted a specified space within the status bar.</span>
        <span style=color:#66d9ef>self</span>.statusBarItem = statusBar.statusItem(withLength: NSStatusItem.squareLength)
        <span style=color:#66d9ef>self</span>.statusBarItem.button?.image = NSImage(systemSymbolName: <span style=color:#e6db74>&#34;star.fill&#34;</span>, accessibilityDescription: <span style=color:#e6db74>&#34;Status bar icon&#34;</span>)

        <span style=color:#75715e>// An object that manages an app’s menus.</span>
        <span style=color:#66d9ef>self</span>.statusBarMenu = NSMenu()
        <span style=color:#66d9ef>self</span>.statusBarMenu.addItem(withTitle: <span style=color:#e6db74>&#34;Hello&#34;</span>, action: <span style=color:#66d9ef>nil</span>, keyEquivalent: <span style=color:#e6db74>&#34;&#34;</span>)

        <span style=color:#75715e>// Add menu to statusbar</span>
        <span style=color:#66d9ef>self</span>.statusBarItem.menu = <span style=color:#66d9ef>self</span>.statusBarMenu
    }
}
</code></pre></div><p>Finally we need to add a property to our target. Open Xcode and select the top item
in Project navigator. Then select <code>TARGETS</code> menu and navigate to <code>Info</code> tab.</p>
<p><img loading=lazy src=/img/application_is_agent.png alt=application_is_agent>
</p>
<p>Add <code>Application is agent (UIElement) YES</code> as seen in screen shot above. This makes our application
run in background and do not populate the menu bar (File, edit, view &mldr; items near apple logo).</p>
<p>At this stage we should have a star with a single menu item in our statusbar.</p>
<p><img loading=lazy src=/img/star.png alt=star>
</p>
<h3 id=open-windows>Open Windows<a hidden class=anchor aria-hidden=true href=#open-windows>#</a></h3>
<p>In order to make our statusbar application more useful let&rsquo;s open some windows from
statusbar items programmatically. We will create <code>NSWindow</code> instances by clicking
statusbar menu items. In these windows we will use SwiftUI elements.</p>
<p>First create a SwiftUI view with following content:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>// HelloView</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>SwiftUI</span>

<span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>HelloView</span>: View {
    <span style=color:#66d9ef>var</span> body: some View {
        Text(<span style=color:#e6db74>&#34;Hello from statusbar&#34;</span>)
            .frame(width: <span style=color:#ae81ff>200</span>, height: <span style=color:#ae81ff>100</span>, alignment: .center)
    }
}
</code></pre></div><p>Add following function to <code>AppDelegate.swift</code> file:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>@objc</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>sayHello</span>() {
    <span style=color:#75715e>// Get focus from other apps</span>
    NSApplication.shared.activate(ignoringOtherApps: <span style=color:#66d9ef>true</span>)

    <span style=color:#75715e>// Create the frame to draw window</span>
    <span style=color:#66d9ef>let</span> hello = NSWindow(
        contentRect: NSRect(x: <span style=color:#ae81ff>0</span>, y: <span style=color:#ae81ff>0</span>, width: <span style=color:#ae81ff>640</span>, height: <span style=color:#ae81ff>480</span>),
        styleMask: [.titled, .closable, .fullSizeContentView],
        backing: .buffered,
        <span style=color:#66d9ef>defer</span>: <span style=color:#66d9ef>false</span>
    )
    <span style=color:#75715e>// Add title</span>
    hello.title = <span style=color:#e6db74>&#34;Hello!&#34;</span>

    <span style=color:#75715e>// Keeps window reference active, we need to use this when using NSHostingView</span>
    hello.isReleasedWhenClosed = <span style=color:#66d9ef>false</span>

    <span style=color:#75715e>// Lets us use SwiftUI viws with AppKit</span>
    hello.contentView = NSHostingView(rootView: HelloView())

    <span style=color:#75715e>// Center and bring forward</span>
    hello.center()
    hello.makeKeyAndOrderFront(<span style=color:#66d9ef>nil</span>)
}
</code></pre></div><p>To call this function we will add a selector to our statusbar item:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>// Find the line where you add Hello item</span>
<span style=color:#66d9ef>self</span>.statusBarMenu.addItem(withTitle: <span style=color:#e6db74>&#34;Hello&#34;</span>, action: <span style=color:#66d9ef>#selector</span>(sayHello), keyEquivalent: <span style=color:#e6db74>&#34;&#34;</span>)
</code></pre></div><p>Finally our <code>AppDelegate.swift</code> file looks like this:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>// AppDelegate.swift</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>AppKit</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>SwiftUI</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppDelegate</span>: NSObject, NSApplicationDelegate {

    <span style=color:#66d9ef>var</span> statusBarItem: NSStatusItem!
    <span style=color:#66d9ef>var</span> statusBarMenu: NSMenu!

    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>applicationDidFinishLaunching</span>(<span style=color:#66d9ef>_</span> notification: Notification) {

        <span style=color:#75715e>// Returns the system-wide status bar located in the menu bar.</span>
        <span style=color:#66d9ef>let</span> statusBar = NSStatusBar.system

        <span style=color:#75715e>// Returns a newly created status item that has been allotted a specified space within the status bar.</span>
        <span style=color:#66d9ef>self</span>.statusBarItem = statusBar.statusItem(withLength: NSStatusItem.squareLength)

        <span style=color:#75715e>// systemSymbolName is taken from SF Symbols app that is available for macOS</span>
        <span style=color:#75715e>// https://developer.apple.com/sf-symbols/</span>
        <span style=color:#66d9ef>self</span>.statusBarItem.button?.image = NSImage(systemSymbolName: <span style=color:#e6db74>&#34;star.fill&#34;</span>, accessibilityDescription: <span style=color:#e6db74>&#34;Status bar icon&#34;</span>)

        <span style=color:#75715e>// An object that manages an app’s menus.</span>
        <span style=color:#66d9ef>self</span>.statusBarMenu = NSMenu()
        <span style=color:#66d9ef>self</span>.statusBarMenu.addItem(withTitle: <span style=color:#e6db74>&#34;Hello&#34;</span>, action: <span style=color:#66d9ef>#selector</span>(sayHello), keyEquivalent: <span style=color:#e6db74>&#34;&#34;</span>)

        <span style=color:#75715e>// Add menu to statusbar</span>
        <span style=color:#66d9ef>self</span>.statusBarItem.menu = <span style=color:#66d9ef>self</span>.statusBarMenu
    }

    <span style=color:#66d9ef>@objc</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>sayHello</span>() {
        <span style=color:#75715e>// Get focus from other apps</span>
        NSApplication.shared.activate(ignoringOtherApps: <span style=color:#66d9ef>true</span>)

        <span style=color:#75715e>// Create the frame to draw window</span>
        <span style=color:#66d9ef>let</span> hello = NSWindow(
            contentRect: NSRect(x: <span style=color:#ae81ff>0</span>, y: <span style=color:#ae81ff>0</span>, width: <span style=color:#ae81ff>640</span>, height: <span style=color:#ae81ff>480</span>),
            styleMask: [.titled, .closable, .fullSizeContentView],
            backing: .buffered,
            <span style=color:#66d9ef>defer</span>: <span style=color:#66d9ef>false</span>
        )
        <span style=color:#75715e>// Add title</span>
        hello.title = <span style=color:#e6db74>&#34;Hello!&#34;</span>

        <span style=color:#75715e>// Keeps window reference active, we need to use this when using NSHostingView</span>
        hello.isReleasedWhenClosed = <span style=color:#66d9ef>false</span>

        <span style=color:#75715e>// NSHostingView lets us use SwiftUI views with AppKit</span>
        hello.contentView = NSHostingView(rootView: HelloView())

        <span style=color:#75715e>// Center and bring forward</span>
        hello.center()
        hello.makeKeyAndOrderFront(<span style=color:#66d9ef>nil</span>)
    }
}
</code></pre></div><p>Here is the final result:
<img loading=lazy src=/img/final.png alt=final>
</p>
<h3 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h3>
<p>To summarize:</p>
<ul>
<li>We have used an adapter to add AppKit to our SwiftUI application.</li>
<li>We have used another adapter to call SwiftUI view from AppKit NSWindow.</li>
<li>We have set application target property to run it in background</li>
</ul>
<p>Source code for this application can be found in <a href=https://github.com/ghokun/macos-statusbar-template>GitHub</a></p>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://gokhun.dev/tags/macos/>macos</a></li>
<li><a href=https://gokhun.dev/tags/swift/>swift</a></li>
<li><a href=https://gokhun.dev/tags/swift-ui/>swift-ui</a></li>
</ul>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share Creating a macOS Statusbar Application on twitter" href="https://twitter.com/intent/tweet/?text=Creating%20a%20macOS%20Statusbar%20Application&url=https%3a%2f%2fgokhun.dev%2fposts%2fmacos-statusbar-application%2f&hashtags=macos%2cswift%2cswift-ui"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Creating a macOS Statusbar Application on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fgokhun.dev%2fposts%2fmacos-statusbar-application%2f&title=Creating%20a%20macOS%20Statusbar%20Application&summary=Creating%20a%20macOS%20Statusbar%20Application&source=https%3a%2f%2fgokhun.dev%2fposts%2fmacos-statusbar-application%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Creating a macOS Statusbar Application on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fgokhun.dev%2fposts%2fmacos-statusbar-application%2f&title=Creating%20a%20macOS%20Statusbar%20Application"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Creating a macOS Statusbar Application on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fgokhun.dev%2fposts%2fmacos-statusbar-application%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Creating a macOS Statusbar Application on whatsapp" href="https://api.whatsapp.com/send?text=Creating%20a%20macOS%20Statusbar%20Application%20-%20https%3a%2f%2fgokhun.dev%2fposts%2fmacos-statusbar-application%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Creating a macOS Statusbar Application on telegram" href="https://telegram.me/share/url?text=Creating%20a%20macOS%20Statusbar%20Application&url=https%3a%2f%2fgokhun.dev%2fposts%2fmacos-statusbar-application%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://gokhun.dev>Gokhun</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>